module ai(
input [7:0] line11,line12,line13,line21,line22,line23,line31,line32,line33,
input [3:0] step,
output reg [1:0] pos1,pos2
);
reg [2:0] branch;

always @(*) begin
    if(step==2)
    begin
        if(line11==8'b01011000||line13==8'b01011000||line31==8'b01011000||line33==8'b01011000)
        begin
            if(line11==8'b01011000)
            begin
                pos1=2'd1;
                pos2=2'd3;
                branch=3'd0;
            end
            else if(line13==8'b01011000)
            begin
                pos1=2'd3;
                pos2=2'd3;
                branch=3'd1;
            end
            else if(line31==8'b01011000)
            begin
                pos1=2'd1;
                pos2=2'd1;
                branch=3'd2;
            end
            else if(line33==8'b01011000)
            begin
                pos1=2'd3;
                pos2=2'd1;
                branch=3'd3;
            end
        end
        else 
        begin
            if(line12==8'b01011000)
            begin
                pos1=2'd1;
                pos2=2'd3;
                branch=3'd4;
            end
            else if(line21==8'b01011000)
            begin
                pos1=2'd1;
                pos2=2'd1;
                branch=3'd5;
            end
            else if(line23==8'b01011000)
            begin
                pos1=2'd3;
                pos2=2'd3;
                branch=3'd6;
            end
            else if(line32==8'b01011000)
            begin
                pos1=2'd3;
                pos2=2'd1;
                branch=3'd7;
            end
        end
    end
    else if(step==4)
    begin
        case(branch)
            3'd0:
            begin
                if(line31==8'b01011000)
                begin
                    pos1=2'd2;
                    pos2=2'd1;
                end
                else
                begin
                    pos1=2'd3;
                    pos2=2'd1;
                end
            end
            3'd1:
            begin
                if(line11==8'b01011000)
                begin
                    pos1=2'd1;
                    pos2=2'd2;
                end
                else
                begin
                    pos1=2'd1;
                    pos2=2'd1;
                end
            end
            3'd2:
            begin
                if(line33==8'b01011000)
                begin
                    pos1=2'd3;
                    pos2=2'd2;
                end
                else
                begin
                    pos1=2'd3;
                    pos2=2'd3;
                end
            end
            3'd3:
            begin
                if(line13==8'b01011000)
                begin
                    pos1=2'd2;
                    pos2=2'd3;
                end
                else
                begin
                    pos1=2'd1;
                    pos2=2'd3;
                end
            end
            3'd4:
            begin
                if(line31==8'b01011000)
                begin
                    pos1=2'd2;
                    pos2=2'd3;
                end
                else
                begin
                    pos1=2'd3;
                    pos2=2'd1;
                end
            end
            3'd5:
            begin
                if(line33==8'b01011000)
                begin
                    pos1=2'd1;
                    pos2=2'd2;
                end
                else
                begin
                    pos1=2'd3;
                    pos2=2'd3;
                end
            end
            3'd6:
            begin
                if(line11==8'b01011000)
                begin
                    pos1=2'd3;
                    pos2=2'd2;
                end
                else
                begin
                    pos1=2'd1;
                    pos2=2'd1;
                end
            end
            3'd7:
            begin
                if(line13==8'b01011000)
                begin
                    pos1=2'd2;
                    pos2=2'd1;
                end
                else
                begin
                    pos1=2'd1;
                    pos2=2'd3;
                end
            end
        endcase
    end
    else if(step==6)
    begin
        case(branch)
            3'd0:
            begin
                if(line23==8'b01011000)
                begin
                    pos1=2'd1;
                    pos2=2'd2;
                end
                else
                begin
                    pos1=2'd2;
                    pos2=2'd3;
                end
            end
            3'd1:
            begin
                if(line32==8'b01011000)
                begin
                    pos1=2'd2;
                    pos2=2'd1;
                end
                else
                begin
                    pos1=2'd3;
                    pos2=2'd2;
                end
            end
            3'd2:
            begin
                if(line12==8'b01011000)
                begin
                    pos1=2'd2;
                    pos2=2'd1;
                end
                else
                begin
                    pos1=2'd1;
                    pos2=2'd2;
                end
            end
            3'd3:
            begin
                if(line21==8'b01011000)
                begin
                    pos1=2'd3;
                    pos2=2'd2;
                end
                else
                begin
                    pos1=2'd2;
                    pos2=2'd1;
                end
            end
            3'd4:
            begin
                if(line21==8'b01011000)
                begin
                    pos1=2'd3;
                    pos2=2'd3;
                end
                else
                begin
                    pos1=2'd2;
                    pos2=2'd1;
                end
            end
            3'd5:
            begin
                if(line13==8'b01011000)
                begin
                    pos1=2'd3;
                    pos2=2'd2;
                end
                else
                begin
                    pos1=2'd1;
                    pos2=2'd3;
                end
            end
            3'd6:
            begin
                if(line12==8'b01011000)
                begin
                    pos1=2'd3;
                    pos2=2'd1;
                end
                else
                begin
                    pos1=2'd1;
                    pos2=2'd2;
                end
            end
            3'd7:
            begin
                if(line11==8'b01011000)
                begin
                    pos1=2'd2;
                    pos2=2'd3;
                end
                else
                begin
                    pos1=2'd1;
                    pos2=2'd1;
                end
            end
        endcase
    end
    else if(step==8)
    begin
        case(branch)
            3'd0:
            begin
                if(line32==8'b01011000)
                begin
                    pos1=2'd3;
                    pos2=2'd3;
                end
                else
                begin
                    pos1=2'd3;
                    pos2=2'd2;
                end
            end
            3'd1:
            begin
                if(line23==8'b01011000)
                begin
                    pos1=2'd3;
                    pos2=2'd1;
                end
                else
                begin
                    pos1=2'd2;
                    pos2=2'd3;
                end
            end
            3'd2:
            begin
                if(line23==8'b01011000)
                begin
                    pos1=2'd1;
                    pos2=2'd3;
                end
                else
                begin
                    pos1=2'd2;
                    pos2=2'd3;
                end
            end
            3'd3:
            begin
                if(line12==8'b01011000)
                begin
                    pos1=2'd1;
                    pos2=2'd1;
                end
                else
                begin
                    pos1=2'd1;
                    pos2=2'd2;
                end
            end
        endcase
    end
end
endmodule

module judge(
input [7:0] line11,line12,line13,line21,line22,line23,line31,line32,line33,
input [3:0] step,
output reg [1:0] win
);

always @(*) begin
    if( (line11==8'b01001111&&line12==8'b01001111&&line13==8'b01001111)||
        (line21==8'b01001111&&line22==8'b01001111&&line23==8'b01001111)||
        (line31==8'b01001111&&line32==8'b01001111&&line33==8'b01001111)||
        (line11==8'b01001111&&line21==8'b01001111&&line31==8'b01001111)||
        (line12==8'b01001111&&line22==8'b01001111&&line32==8'b01001111)||
        (line13==8'b01001111&&line23==8'b01001111&&line33==8'b01001111)||
        (line11==8'b01001111&&line22==8'b01001111&&line33==8'b01001111)||
        (line13==8'b01001111&&line22==8'b01001111&&line31==8'b01001111)
    )
    win = 2'd1;
    else if(    (line11==8'b01011000&&line12==8'b01011000&&line13==8'b01011000)||
                (line21==8'b01011000&&line22==8'b01011000&&line23==8'b01011000)||
                (line31==8'b01011000&&line32==8'b01011000&&line33==8'b01011000)||
                (line11==8'b01011000&&line21==8'b01011000&&line31==8'b01011000)||
                (line12==8'b01011000&&line22==8'b01011000&&line32==8'b01011000)||
                (line13==8'b01011000&&line23==8'b01011000&&line33==8'b01011000)||
                (line11==8'b01011000&&line22==8'b01011000&&line33==8'b01011000)||
                (line13==8'b01011000&&line22==8'b01011000&&line31==8'b01011000)
    )
    win = 2'd2;
    else if(step==9) win = 2'd3;
    else win = 2'd0;
end
endmodule
